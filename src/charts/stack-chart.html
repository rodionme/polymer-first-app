<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/d3-bundle-element/d3-element-multi.html">
<link rel="import" href="../../bower_components/multi-chart/chart/multi-chart-simple.html">
<link rel="import" href="../../bower_components/multi-chart/d3-shape/d3-stack.html">
<link rel="import" href="../../bower_components/multi-chart/shape/multi-shape-stack.html">
<link rel="import" href="../../bower_components/multi-chart/chart/multi-chart-coordinate.html">
<link rel="import" href="../../bower_components/multi-chart/multi-serie.html">
<link rel="import" href="../../bower_components/multi-chart/multi-selector.html">
<link rel="import" href="../../bower_components/multi-chart/multi-legend.html">
<link rel="stylesheet" href="../../bower_components/multi-chart/multichart.css">

<dom-module id="stack-chart">
  <template>
    <style>
      #chart {
        height: 400px;
      }
    </style>

    <multi-chart-coordinate
        id="chart"
        data="[[data]]"
        width="{{width}}"
        height="{{height}}"
        y-domain="[[yDomain]]"
        color-scale="{{colorScale}}"
        x-scale="{{xScale}}"
        y-scale="{{yScale}}"
        color-domain="[[keys]]"
        series="{{series}}"
        keys="{{keys}}">

      <d3-stack
          domain="{{yDomain}}"
          data="{{stack}}"
          domain-min="[[domainMin]]"
          value="[[value]]"
          value-path="[[valuePath]]"
          order="[[order]]"
          offset="[[offset]]"
          keys="[[keys]]"></d3-stack>

      <multi-shape-stack
          chart
          stack="[[stack]]"
          x-scale="[[xScale]]"
          y-scale="[[yScale]]"
          color-scale="[[colorScale]]"></multi-shape-stack>

      <multi-serie serie key="abv" label="abv"></multi-serie>
      <multi-serie serie key="ibu" label="ibu"></multi-serie>
      <multi-serie serie key="ebc" label="ebc"></multi-serie>

      <multi-legend
          legend chart-width="{{width}}"
          scale="[[colorScale]]"
          position="top-right"></multi-legend>

      <multi-selector
          selection-type="brushX"
          width="[[width]]"
          height="[[height]]"
          x-scale="[[xScale]]"
          accessor="[[keyAccessor]]"></multi-selector>
    </multi-chart-coordinate>
  </template>

  <script>
    Polymer({
      is: 'stack-chart',
    });
  </script>
</dom-module>
